<p id="notice"><%= notice %></p>

<p>
  <strong><h1>
  <%= @match.name %> 
  </h1></strong>
  <h2>Frame <%= @match.frame %></h2>
</p>

<table>
  <tr>
    <th> Name</th>
    <th> Score </th>
    <th> Points </th>
  </tr>
<% @match.players.each do |player| %>
  <tr>
    <td>
      <%= player.name %> </br>
    </td>
    <td>
      
      <table border="1" cellspacing="0" cellpadding="4">
        <tr>
          <% for i in 1..10 %>
            <th colspan="3"><center><%= i %></center></th> 
          <% end %>
        </tr>
          
        <% a = 0 %>  
        <% b = 0 %>
        <tr>

          <% while a < player.score.length %>
            <% if b >= 9 %>
              <td><center><%=player.score[a]%></center></td>
              <% b += 1 %>
              <% a += 1 %>
            <% elsif player.score[a] == 'X' %>
                <% b += 1 %>
                <td colspan="2"></td>
                <td><center>X</center></td>
                <% a += 1 %>
            <% else %>
                <% b += 1 %>
                <td colspan="2"><center><%= player.score[a] %><center></td>
                <td><center><%= player.score[a+1] %><center></td>
                <% a += 2 %>       
            <% end %>
          <% end %>

          <% if b < 10 %>
            <% b = 9-b %>
            <% for a in 0..b %>
              <% if a == b %>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
              <% else %>
                <td colspan="2">&nbsp;</td>
                <td>&nbsp;</td>
              <% end %>
            <% end %>
          <% end %>

        </tr>

        <% a = 0 %>  
        <tr>
          <% player.frames.each do |f| %>
            <td colspan="3">
              <center><%= f.read_attribute(:total) %></center>
            </td>   
            <% a += 1 %>
          <% end %>
    
          <% a = 9-a %>
          <% for c in 0..a %>
            <td colspan="3"><center>&nbsp;</center></td>
          <% end %>
        </tr>
  
      </table>
    </td>
    
    <td>
      <center><%= player.get_points %> </br></center>
    </td>

  </tr>
<% end %>
</table>

<br>
<br>

<b>=========================================</b>

<% if !@match.end_of_game %>

  <h2><b><u><%= @match.current_player_name %></b>'s Turn</u></h2>

  <br>
  Enter Score: 
  <%= render 'frames/form' %>

  <br>
  <br>
  <br>

  <%= link_to 'Quit Game', matches_url %>

<% else %>

  <h2><b>
  <% winners = @match.winner %>
  <% if winners.size == 1 %>
    <%= winners[0].name %> is the winner
  <% else %>
    <% for i in 0..winners.size-1 %>
      <%= winners[i].name %>,&nbsp
    <% end %>
    are the winners
  <% end %>
  </b></h2>

  <br>
  <br>
  <br>

  <%= link_to 'Back', matches_url %>

<% end %>





